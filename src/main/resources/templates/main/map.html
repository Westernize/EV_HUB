<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>EV HUB</title>

    <!-- ✅ Google Fonts - 프리미엄 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- ✅ CSS -->
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/map.css}">
    <link rel="stylesheet" th:href="@{/css/buttons.css}">
    <link rel="stylesheet" th:href="@{/css/loading.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    <link rel="stylesheet" th:href="@{/css/responsive.css}">

    <!-- ✅ Kakao Map API (clusterer 라이브러리 포함) -->
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d693cf4169b24f12ec19b0a6713f58f4&autoload=false&libraries=services,clusterer"></script>
    
    <!-- 로그인 성공 시 로딩 스크린 즉시 숨기기 -->
    <script>
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('login') === 'success') {
                // 즉시 실행하여 로딩 스크린이 렌더링되기 전에 숨기기
                const hideLoading = function() {
                    const loadingScreen = document.getElementById('loading-screen');
                    if (loadingScreen) {
                        loadingScreen.style.setProperty('display', 'none', 'important');
                        loadingScreen.style.setProperty('visibility', 'hidden', 'important');
                        loadingScreen.style.setProperty('opacity', '0', 'important');
                        loadingScreen.remove();
                    }
                };
                
                // 즉시 실행
                hideLoading();
                
                // DOM이 로드된 후에도 다시 확인
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', hideLoading);
                }
                
                // 추가 안전장치: 약간의 지연 후에도 확인
                setTimeout(hideLoading, 0);
                setTimeout(hideLoading, 10);
                setTimeout(hideLoading, 50);
            }
        })();
    </script>
    <style>
        /* 로그인 성공 시 로딩 스크린 숨기기 (CSS로도 처리) */
        body:has([data-login-success="true"]) #loading-screen,
        #loading-screen[data-login-success="true"],
        /* URL 파라미터로도 확인 */
        body:has([href*="login=success"]) #loading-screen {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }
        
        /* 로그인 성공 시 로딩 스크린의 모든 자식 요소도 숨기기 */
        body:has([data-login-success="true"]) #loading-screen *,
        #loading-screen[data-login-success="true"] * {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }
    </style>
</head>
<body>

<!-- ✅ 로딩화면 -->
<div id="loading-screen" 
     style="position: fixed !important; top: 0 !important; left: 0 !important; width: 100vw !important; height: 100vh !important; background-color: #ffffff !important; display: flex !important; flex-direction: column !important; justify-content: center !important; align-items: center !important; z-index: 99999 !important; opacity: 1 !important; visibility: visible !important; overflow: hidden !important; transition: none !important;">
    <!-- 배경 비디오 -->
    <video id="loading-background-video" 
           autoplay 
           muted 
           loop 
           playsinline
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0;"
           th:src="@{/img/car.mp4}"
           src="/img/car.mp4">
    </video>
    <!-- 로딩 콘텐츠 (비디오 위에 표시) -->
    <div style="position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%;">
        <img id="loading-logo" th:src="@{/img/logo.png}" src="/img/logo.png" alt="EV HUB" />
        <div id="charging-box">
            <span id="charging-text">0%</span>
            <div id="charging-fill"></div>
        </div>
    </div>

</div>

<!-- ✅ 왼쪽 패널 -->
<div id="sidebar">
    <!-- 사이드바 메뉴 -->
    <div id="sidebar-menu">
        <div class="menu-logo-top">
            <img th:src="@{/img/sidebar-logo.png}" src="/img/sidebar-logo.png" alt="EV HUB" />
        </div>
        <button class="menu-item active" id="menu-list">
            <div class="menu-icon">☰</div>
            <span class="menu-text">목록</span>
        </button>
        <button class="menu-item" id="menu-filter">
            <div class="menu-icon">📅</div>
            <span class="menu-text">내 예약</span>
        </button>
        <button class="menu-item" id="menu-favorites">
            <div class="menu-icon">⭐</div>
            <span class="menu-text">즐겨찾기</span>
        </button>
        <button class="menu-item" id="menu-coupons">
            <div class="menu-icon">🎟</div>
            <span class="menu-text">쿠폰</span>
        </button>
        <button class="menu-item" id="menu-info">
            <div class="menu-icon">👤</div>
            <span class="menu-text">내 정보</span>
        </button>
        <button class="menu-item" id="menu-feedback">
            <div class="menu-icon">💬</div>
            <span class="menu-text">챗봇</span>
        </button>
        <!-- 로그인 버튼 (하단 고정) -->
        <div style="flex: 0.5;"></div>
        <div class="menu-item" id="menu-login" style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px; cursor: default;">
            <span id="login-link" class="menu-text" style="cursor: pointer; font-size: 14px; color: rgba(255, 255, 255, 0.9);">로그인</span>
            <span id="register-link" class="menu-text" style="cursor: pointer; font-size: 14px; color: rgba(255, 255, 255, 0.9);">회원가입</span>
        </div>
    </div>

    <!-- 사이드바 컨텐츠 -->
    <div id="sidebar-content">
        <!-- 로그인 안내 섹션 (로그아웃 상태일 때만 표시) -->
        <div id="login-prompt-section" class="login-prompt-section hidden">
            <div class="login-prompt-content">
                <div class="login-prompt-icon">🔐</div>
                <h3 class="login-prompt-title">로그인하고 시작하세요</h3>
                <p class="login-prompt-description">로그인하시면 다양한 혜택을 누려보실 수 있습니다</p>
                <div class="login-prompt-benefits">
                    <div class="benefit-item">✨ 예약 관리 및 내역 확인</div>
                    <div class="benefit-item">⭐ 즐겨찾기 저장</div>
                    <div class="benefit-item">🎟️ 쿠폰 및 특별 혜택</div>
                </div>
                <div class="login-prompt-buttons">
                    <button id="sidebar-login-btn" class="sidebar-login-btn">로그인</button>
                    <button id="sidebar-register-btn" class="sidebar-register-btn">회원가입</button>
                </div>
            </div>
        </div>

        <!-- 사용자 정보 섹션 (로그인 상태일 때만 표시) -->
        <div id="user-info-section" class="user-info-section hidden">
            <div>
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                    <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #FF6B35 0%, #4ECDC4 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; font-weight: bold; flex-shrink: 0; box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);">
                        <span id="user-initial">U</span>
                    </div>
                    <div style="flex: 1; min-width: 0;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px; flex-wrap: wrap;">
                            <div style="font-weight: 600; color: #ffffff; font-size: 16px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" id="user-nickname">사용자</div>
                            <div style="font-size: 13px; color: #a8e6cf; font-weight: 500; white-space: nowrap;" id="user-reservation-count">내 예약: 0건</div>
                        </div>
                        <div style="font-size: 12px; color: rgba(255,255,255,0.7); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" id="user-username">@username</div>
                    </div>
                </div>
                <button id="sidebar-logout-btn" class="sidebar-logout-btn">로그아웃</button>
            </div>
        </div>

        <!-- 즐겨찾기 섹션 -->
        <div id="favorites-section" class="content-section hidden">
            <h3>즐겨찾기</h3>
            <div id="favorites-list" style="padding: 20px; text-align: center; color: #999;">
            </div>
        </div>

        <!-- 쿠폰 섹션 -->
        <div id="coupons-section" class="content-section hidden">
            <h3>내 쿠폰</h3>
            <div id="coupons-list" style="padding: 20px; text-align: center; color: #999;">
            </div>
        </div>

        <!-- 예약 섹션 -->
        <div id="reservations-section" class="content-section hidden">
            <h3>내 예약</h3>
            <div id="reservations-list" style="padding: 20px; text-align: center; color: #999;">
            </div>
        </div>

        <!-- 피드백/챗봇 섹션 -->
        <div id="feedback-section" class="content-section hidden">
            <h3>💬 고객 지원</h3>
            <div id="chatbot-container" style="display: flex; flex-direction: column;">
                <!-- 챗봇 메시지 영역 -->
                <div id="chatbot-messages" style="flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; background: #f8f9fa;">
                    <div class="chat-message bot-message" style="padding: 12px 16px; background: #ffffff; border-radius: 12px; max-width: 80%; align-self: flex-start; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-weight: 600; color: #667eea; font-size: 13px; margin-bottom: 4px;">EV HUB 챗봇</div>
                        <div style="color: #333; font-size: 14px; line-height: 1.5;">안녕하세요! EV HUB 고객 지원 챗봇입니다. 무엇을 도와드릴까요? 😊</div>
                    </div>
                    <div class="chat-message bot-message" style="padding: 12px 16px; background: #ffffff; border-radius: 12px; max-width: 80%; align-self: flex-start; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-weight: 600; color: #667eea; font-size: 13px; margin-bottom: 4px;">EV HUB 챗봇</div>
                        <div style="color: #333; font-size: 14px; line-height: 1.5;">자주 묻는 질문:</div>
                        <div style="margin-top: 8px; display: flex; flex-direction: column; gap: 6px;">
                            <button class="faq-button" data-question="예약" style="padding: 8px 12px; background: #f0f4ff; border: 1px solid #667eea; border-radius: 8px; color: #667eea; font-size: 13px; text-align: left; cursor: pointer; transition: all 0.2s;">📅 예약은 어떻게 하나요?</button>
                            <button class="faq-button" data-question="결제" style="padding: 8px 12px; background: #f0f4ff; border: 1px solid #667eea; border-radius: 8px; color: #667eea; font-size: 13px; text-align: left; cursor: pointer; transition: all 0.2s;">💳 결제 방법은 무엇인가요?</button>
                            <button class="faq-button" data-question="쿠폰" style="padding: 8px 12px; background: #f0f4ff; border: 1px solid #667eea; border-radius: 8px; color: #667eea; font-size: 13px; text-align: left; cursor: pointer; transition: all 0.2s;">🎟 쿠폰은 어떻게 사용하나요?</button>
                            <button class="faq-button" data-question="취소" style="padding: 8px 12px; background: #f0f4ff; border: 1px solid #667eea; border-radius: 8px; color: #667eea; font-size: 13px; text-align: left; cursor: pointer; transition: all 0.2s;">❌ 예약 취소는 어떻게 하나요?</button>
                        </div>
                    </div>
                </div>
                <!-- 챗봇 입력 영역 -->
                <div style="padding: 16px 20px; background: #ffffff; border-top: 1px solid #e8eaed;">
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="chatbot-input" placeholder="메시지를 입력하세요..." style="flex: 1; padding: 12px 16px; border: 1px solid #e8eaed; border-radius: 24px; font-size: 14px; outline: none; transition: all 0.2s;" />
                        <button id="chatbot-send-btn" style="padding: 12px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 24px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; white-space: nowrap;">전송</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 충전소 목록 섹션 (기본) -->
        <div id="stations-section" class="content-section">
            <div id="stationList">로딩 중...</div>
            <div id="pagination" style="display: none; padding: 16px; justify-content: center; gap: 8px; flex-wrap: wrap;"></div>
        </div>

        <!-- 상세정보 영역 -->
        <div id="sidebar-detail" class="hidden">
            <div class="detail-header">
                <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                    <h2 id="sidebar-detail-name">충전소 이름</h2>
                    <span id="sidebar-detail-time" style="font-size: 14px; color: rgba(255, 255, 255, 0.7); font-weight: 500;"></span>
                </div>
                <button id="sidebar-detail-close">×</button>
            </div>
            <div class="detail-section">
                <div class="charger-status-header">
                    <h3 class="charger-title">충전기</h3>
                    <div class="charger-availability" id="charger-availability">0대 중 0대 사용가능</div>
                </div>
                <div id="charger-cards-container"></div>
            </div>
            <div class="detail-section">
                <h3>상세정보</h3>
                <p><b>도로명주소:</b> <span id="sidebar-detail-addr"></span></p>
                <p><b>상세위치:</b> <span id="sidebar-detail-loc"></span></p>
                <p><b>운영기관:</b> <span id="sidebar-detail-operator"></span></p>
            </div>
            <div class="detail-section">
                <h3>시간별 사용량</h3>
                <div class="weekday-selector">
                    <button class="weekday-btn" data-day="0">일</button>
                    <button class="weekday-btn" data-day="1">월</button>
                    <button class="weekday-btn" data-day="2">화</button>
                    <button class="weekday-btn" data-day="3">수</button>
                    <button class="weekday-btn" data-day="4">목</button>
                    <button class="weekday-btn" data-day="5">금</button>
                    <button class="weekday-btn" data-day="6">토</button>
                </div>
                <div id="hourly-usage-chart" class="hourly-usage-container"></div>
            </div>
            <div class="detail-section">
                <h3>위치 사진</h3>
                <div id="sidebar-roadview" style="width:100%; height:250px; border-radius:10px; margin:10px 0; background:#eaeaea; display:flex; align-items:center; justify-content:center; color:#777;">
                    이미지 준비중...
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ✅ 지도 -->
<div id="map">
    <!-- 지도 위쪽 검색 및 필터 영역 -->
    <div id="map-top-controls">
        <div style="position: relative; display: inline-block;">
            <input type="text" id="searchBox" placeholder="충전소명 또는 지역명을 입력해 주세요" />
        </div>
        <div id="map-filters">
            <button class="filter-chip" id="filter-available">현재 사용 가능</button>
            <button class="filter-chip" id="filter-reservable">예약가능</button>
        </div>
    </div>
</div>

<!-- ✅ 충전타입 필터 -->
<div id="charger-type-panel">
    <div class="panel-header">
        <strong>[충전타입]</strong>
        <button class="close-btn">×</button>
    </div>

    <div class="panel-body">
        <label><input type="checkbox" value="전체" checked> 전체</label>
        <label><input type="checkbox" value="DC콤보" checked> DC콤보</label>
        <label><input type="checkbox" value="DC차데모" checked> DC차데모</label>
        <label><input type="checkbox" value="AC3상" checked> AC3상</label>
        <label><input type="checkbox" value="AC완속" checked> 완속</label>
        <label><input type="checkbox" value="DC콤보(완속)" checked> DC콤보(완속)</label>
    </div>
</div>

<!-- ✅ 충전소 상세정보 팝업 -->
<div id="station-detail" class="hidden">
    <div class="detail-header">
        <h2 id="detail-name">충전소 이름</h2>
        <button id="detail-close">×</button>
    </div>

    <div class="detail-section">
        <h3>충전상태</h3>
        <table id="detail-table">
            <thead>
            <tr>
                <th>구분</th>
                <th>충전기 타입</th>
                <th>충전기 상태</th>
                <th>충전기 ID</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="detail-section">
        <h3>상세정보</h3>
        <p><b>도로명주소:</b> <span id="detail-addr"></span></p>
        <p><b>상세위치:</b> <span id="detail-loc"></span></p>
        <p><b>운영기관:</b> <span id="detail-operator"></span></p>
    </div>

    <!-- ✅ 여기 추가 -->
    <div class="detail-section">
        <h3>위치 사진</h3>
        <div id="roadview"
             style="width:100%; height:250px; border-radius:10px; margin:10px 0; background:#eaeaea; display:flex; align-items:center; justify-content:center; color:#777;">
            이미지 준비중...
        </div>
    </div>
</div>

<!-- ⚡ 마커 설명 범례 -->
<div id="marker-legend">
    <div><img th:src="@{/img/g.png}" alt="충전가능" /> 충전가능</div>
    <div><img th:src="@{/img/r.png}" alt="충전불가" /> 충전불가(충전중)</div>
    <div><img th:src="@{/img/o.png}" alt="점검중" /> 점검중(부분가능)</div>
</div>


<!-- 📦 버튼 -->
<button id="searchBtn">현 지도에서 검색</button>

<!-- 내 정보 모달 -->
<div id="myinfo-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>내 정보</h2>
            <button class="modal-close" id="myinfo-modal-close">×</button>
        </div>
        <div class="modal-body">
            <div id="myinfo-content">
                <div style="text-align: center; padding: 20px; color: #999;">
                    로그인이 필요합니다.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 예약 모달 -->
<div id="reservation-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>충전소 예약</h2>
            <button class="modal-close" id="reservation-modal-close">×</button>
        </div>
        <div class="modal-body">
            <div id="reservation-station-info" style="margin-bottom: 20px; padding: 16px; background: #f8f9fa; border-radius: 8px;">
                <div style="font-weight: 600; font-size: 16px; color: #333; margin-bottom: 8px;" id="reservation-station-name"></div>
                <div style="font-size: 14px; color: #666;" id="reservation-charger-id"></div>
            </div>
            
            <div style="margin-bottom: 16px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">예약 날짜</label>
                <input type="date" id="reservation-date" class="auth-input" min="" />
            </div>
            
            <div style="margin-bottom: 16px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">시작 시간</label>
                <input type="time" id="reservation-time" class="auth-input" />
            </div>
            
            <div style="margin-bottom: 16px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">예약 시간</label>
                <select id="reservation-duration" class="auth-input" style="width: 100%; padding: 12px 16px; border: 2px solid #e8eaed; border-radius: 8px; font-size: 14px; outline: none; transition: all 0.2s ease; box-sizing: border-box; background: white; cursor: pointer;">
                    <option value="30">30분</option>
                    <option value="60" selected>1시간</option>
                    <option value="90">1시간 30분</option>
                    <option value="120">2시간</option>
                    <option value="150">2시간 30분</option>
                    <option value="180">3시간</option>
                    <option value="210">3시간 30분</option>
                    <option value="240">4시간</option>
                </select>
            </div>
            
            <div style="margin-bottom: 20px; padding: 16px; background: #f0f4ff; border-radius: 8px; border: 2px solid #667eea;">
                <div style="font-size: 14px; color: #667eea; font-weight: 600; margin-bottom: 8px;">예약 시간</div>
                <div id="reservation-time-range" style="font-size: 18px; font-weight: 700; color: #333;">--:-- 부터 --:-- 까지</div>
            </div>
            
            <button id="reservation-submit-btn" class="auth-btn primary" style="width: 100%;">예약하기</button>
        </div>
    </div>
</div>

<!-- 예약 모달용 결제 모달 -->
<div id="reservation-payment-modal" class="modal hidden">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <h2>결제하기</h2>
            <button class="modal-close" id="reservation-payment-modal-close">×</button>
        </div>
        <div class="modal-body">
            <div id="reservation-payment-reservation-info" style="margin-bottom: 20px; padding: 16px; background: #f8f9fa; border-radius: 8px;">
                <div style="font-weight: 600; font-size: 16px; color: #333; margin-bottom: 8px;" id="reservation-payment-place-name"></div>
                <div style="font-size: 14px; color: #666;" id="reservation-payment-date-time"></div>
            </div>
            
            <div style="margin-bottom: 20px; padding: 16px; background: #fff; border: 2px solid #e8eaed; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <span style="font-size: 16px; font-weight: 600; color: #333;">결제 금액</span>
                    <span style="font-size: 24px; font-weight: 700; color: #002c5f;">100원</span>
                </div>
                <div style="font-size: 12px; color: #999; margin-top: 8px;">⏰ 결제 후 10분 이내에 결제를 완료해주세요.</div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 12px; font-weight: 600; color: #333; font-size: 14px;">결제 수단 선택</label>
                <div style="display: flex; gap: 12px;">
                    <button id="reservation-payment-method-kakao" class="payment-method-btn active" data-method="kakaopay" style="flex: 1; padding: 16px; background: #FEE500; color: #000; border: 2px solid #FEE500; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                        <div style="font-size: 18px; margin-bottom: 4px;"></div>
                        <div>카카오페이</div>
                    </button>
                    <button id="reservation-payment-method-toss" class="payment-method-btn" data-method="tosspay" style="flex: 1; padding: 16px; background: #0064FF; color: white; border: 2px solid #0064FF; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                        <div style="font-size: 18px; margin-bottom: 4px;"></div>
                        <div>토스페이</div>
                    </button>
                </div>
            </div>
            
            <button id="reservation-payment-coupon-btn" class="auth-btn" style="width: 100%; margin-bottom: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                🎟 쿠폰으로 결제하기
            </button>
            
            <button id="reservation-payment-later-btn" class="auth-btn secondary" style="width: 100%;">나중에 결제하기</button>
        </div>
    </div>
</div>

<!-- 결제 모달 (내 예약용) -->
<div id="payment-modal" class="modal hidden">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <h2>결제하기</h2>
            <button class="modal-close" id="payment-modal-close">×</button>
        </div>
        <div class="modal-body">
            <div id="payment-reservation-info" style="margin-bottom: 20px; padding: 16px; background: #f8f9fa; border-radius: 8px;">
                <div style="font-weight: 600; font-size: 16px; color: #333; margin-bottom: 8px;" id="payment-place-name"></div>
                <div style="font-size: 14px; color: #666;" id="payment-date-time"></div>
            </div>
            
            <div style="margin-bottom: 20px; padding: 16px; background: #fff; border: 2px solid #e8eaed; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <span style="font-size: 16px; font-weight: 600; color: #333;">결제 금액</span>
                    <span style="font-size: 24px; font-weight: 700; color: #002c5f;" id="payment-amount">100원</span>
                </div>
                <div style="font-size: 12px; color: #999; margin-top: 8px;">⏰ 결제 후 10분 이내에 결제를 완료해주세요.</div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 12px; font-weight: 600; color: #333; font-size: 14px;">결제 수단 선택</label>
                <div style="display: flex; gap: 12px;">
                    <button id="payment-method-kakao" class="payment-method-btn active" data-method="kakaopay" style="flex: 1; padding: 16px; background: #FEE500; color: #000; border: 2px solid #FEE500; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                        <div style="font-size: 18px; margin-bottom: 4px;"></div>
                        <div>카카오페이</div>
                    </button>
                    <button id="payment-method-toss" class="payment-method-btn" data-method="tosspay" style="flex: 1; padding: 16px; background: #0064FF; color: white; border: 2px solid #0064FF; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                        <div style="font-size: 18px; margin-bottom: 4px;"></div>
                        <div>토스페이</div>
                    </button>
                </div>
            </div>
            
            <button id="payment-coupon-btn" class="auth-btn" style="width: 100%; margin-bottom: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                🎟 쿠폰으로 결제하기
            </button>
            
            <button id="payment-cancel-btn" class="auth-btn secondary" style="width: 100%;">취소</button>
        </div>
    </div>
</div>

<!-- 아임포트 결제 스크립트 -->
<script src="https://cdn.iamport.kr/v1/iamport.js"></script>

<!-- ✅ JS -->
<script th:src="@{/js/utils.js}"></script>
<script th:src="@{/js/loading.js}" defer></script>
<script th:src="@{/js/auth.js}"></script>
<script th:src="@{/js/reservation.js}"></script>
<script th:src="@{/js/reservation-payment.js}"></script>
<script th:src="@{/js/favorites.js}"></script>
<script th:src="@{/js/coupons.js}"></script>
<script th:src="@{/js/reservations.js}"></script>
<script th:src="@{/js/map.js}"></script>
<script th:src="@{/js/cluster.js}"></script>
<script th:src="@{/js/stations.js}"></script>
<script th:src="@{/js/sidebar.js}"></script>
<script th:src="@{/js/filters.js}"></script>
<script th:src="@{/js/search.js}"></script>
<script th:src="@{/js/menu.js}"></script>
<script th:src="@{/js/chatbot.js}"></script>
<script th:src="@{/js/main.js}"></script>
    
</body>
</html>

